meta {
  name: Validate API Key
  type: http
  seq: 6
}

post {
  url: {{scheme}}://{{host}}:{{port}}/api-keys/verify
  body: json
  auth: none
}

body:json {
  {
    "key": "{{apiKey}}"
  }
}

vars:pre-request {
  apiKey: {{apiKey}}
}

docs {
  # Validate API Key
  
  Validates an API key and returns its metadata if valid.
  
  ## Request Body
  
  | Field | Type   | Description              |
  |-------|--------|--------------------------|
  | key   | string | The API key to validate  |
  
  ## Response
  
  ```json
  {
    "status": "success",
    "data": {
      "created_at": "2026-02-08T10:00:00Z",
      "description": "Key for accessing the reporting API",
      "expires_at": "2027-02-08T10:00:00Z",
      "id": "550e8400-e29b-41d4-a716-446655440000",
      "last_used_at": "2026-02-08T10:30:00Z",
      "name": "My API Key",
      "subject_id": "user-123",
      "scopes": ["read:reports", "write:reports"],
      "updated_at": "2026-02-08T10:00:00Z"
    }
  }
  ```
  
  Note: The actual key value is never returned after creation.
  
  Returns 404 if the key is invalid or expired:
  
  ```json
  {
    "status": "fail",
    "data": {
      "message": "API key not found or expired"
    }
  }
  ```
}
